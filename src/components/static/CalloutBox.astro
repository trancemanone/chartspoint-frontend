---
/**
 * CalloutBox.astro
 *
 * Premium callout/alert box component for highlighting important information.
 * Used in Terms, Privacy, Risk Disclosure pages.
 *
 * Variants:
 * - info: Blue - general information
 * - warning: Amber - cautionary notes
 * - critical: Red - important warnings
 * - tip: Green - helpful tips
 * - note: Gray - neutral notes
 */

export interface Props {
  variant?: 'info' | 'warning' | 'critical' | 'tip' | 'note';
  title?: string;
  class?: string;
}

const {
  variant = 'info',
  title,
  class: className = '',
} = Astro.props;

// Variant styles
const variantStyles = {
  info: {
    bg: 'bg-blue-50',
    border: 'border-blue-200',
    accent: 'bg-blue-500',
    icon: 'text-blue-600',
    title: 'text-blue-900',
  },
  warning: {
    bg: 'bg-amber-50',
    border: 'border-amber-200',
    accent: 'bg-amber-500',
    icon: 'text-amber-600',
    title: 'text-amber-900',
  },
  critical: {
    bg: 'bg-red-50',
    border: 'border-red-200',
    accent: 'bg-red-500',
    icon: 'text-red-600',
    title: 'text-red-900',
  },
  tip: {
    bg: 'bg-emerald-50',
    border: 'border-emerald-200',
    accent: 'bg-emerald-500',
    icon: 'text-emerald-600',
    title: 'text-emerald-900',
  },
  note: {
    bg: 'bg-slate-50',
    border: 'border-slate-200',
    accent: 'bg-slate-400',
    icon: 'text-slate-500',
    title: 'text-slate-800',
  },
};

const styles = variantStyles[variant];

// Icon SVGs by variant
const icons = {
  info: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>`,
  warning: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>`,
  critical: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>`,
  tip: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>`,
  note: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>`,
};
---

<div class:list={[
  'callout-box',
  styles.bg,
  styles.border,
  className
]}>
  <!-- Accent bar -->
  <div class:list={['callout-box__accent', styles.accent]}></div>

  <div class="callout-box__content">
    <!-- Icon -->
    <div class:list={['callout-box__icon', styles.icon]}>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        set:html={icons[variant]}
      />
    </div>

    <!-- Text content -->
    <div class="callout-box__text">
      {title && (
        <h4 class:list={['callout-box__title', styles.title]}>
          {title}
        </h4>
      )}
      <div class="callout-box__body">
        <slot />
      </div>
    </div>
  </div>
</div>

<style>
  .callout-box {
    position: relative;
    margin: 1.5rem 0;
    padding: 1.25rem 1.5rem;
    border: 1px solid;
    border-radius: 0.75rem;
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .callout-box {
      padding: 1.5rem 2rem;
    }
  }

  .callout-box__accent {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    width: 4px;
  }

  .callout-box__content {
    display: flex;
    gap: 1rem;
  }

  .callout-box__icon {
    flex-shrink: 0;
    display: flex;
    align-items: flex-start;
    padding-top: 0.125rem;
  }

  .callout-box__text {
    flex: 1;
    min-width: 0;
  }

  .callout-box__title {
    margin: 0 0 0.5rem;
    font-family: var(--font-heading);
    font-size: 1.0625rem;
    font-weight: 700;
    line-height: 1.4;
  }

  .callout-box__body {
    font-size: 1rem;
    line-height: 1.7;
    color: #334155;
  }

  .callout-box__body :global(p) {
    margin: 0;
  }

  .callout-box__body :global(p + p) {
    margin-top: 0.75rem;
  }

  .callout-box__body :global(ul),
  .callout-box__body :global(ol) {
    margin: 0.75rem 0 0;
    padding-right: 1.25rem;
  }

  .callout-box__body :global(li) {
    margin-bottom: 0.375rem;
  }

  .callout-box__body :global(a) {
    color: inherit;
    font-weight: 500;
    text-decoration: underline;
    text-underline-offset: 4px;
  }

  .callout-box__body :global(strong) {
    font-weight: 600;
  }
</style>
