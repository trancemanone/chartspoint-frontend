/**
 * ═══════════════════════════════════════════════════════════════════════════
 * CHARTSPOINT - Article Page Styles
 * ═══════════════════════════════════════════════════════════════════════════
 *
 * Premium article typography and layout styles for Arabic technical analysis
 * education. Designed for institutional fintech aesthetic and optimal
 * readability for users aged 40-70.
 *
 * Import this file in ArticleLayout.astro or global.css:
 * @import './article.css';
 *
 * ═══════════════════════════════════════════════════════════════════════════
 */

/* ═══════════════════════════════════════════════════════════════════════════
   ARTICLE PAGE CUSTOM PROPERTIES
   ═══════════════════════════════════════════════════════════════════════════ */

:root {
  /* Article Colors */
  --article-bg-page: #F6F8FA;
  --article-bg-content: #FFFFFF;
  --article-bg-sidebar: #FFFFFF;
  --article-bg-highlight: #F8FAFC;

  /* Article Text */
  --article-text-primary: #0F172A;
  --article-text-secondary: #334155;
  --article-text-muted: #64748B;
  --article-text-caption: #94A3B8;

  /* Article Borders */
  --article-border-light: #F1F5F9;
  --article-border-default: #E2E8F0;
  --article-border-strong: #CBD5E1;

  /* Article Accent */
  --article-accent-gold: #d5a035;
  --article-accent-gold-light: #FDF8ED;
  --article-accent-gold-dark: #b8892a;

  /* Article Typography */
  --article-h1-size: 2.5rem;
  --article-h1-size-md: 3rem;
  --article-h2-size: 1.75rem;
  --article-h2-size-md: 2rem;
  --article-h3-size: 1.375rem;
  --article-h3-size-md: 1.5rem;
  --article-body-size: 1.125rem;
  --article-body-size-md: 1.25rem;

  /* Article Spacing */
  --article-h2-margin-top: 2.5rem;
  --article-h2-margin-bottom: 1.25rem;
  --article-h3-margin-top: 2rem;
  --article-h3-margin-bottom: 1rem;
  --article-paragraph-margin: 1.5rem;

  /* Article Animation */
  --h3-bar-animation-duration: 400ms;
  --h3-bar-easing: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ═══════════════════════════════════════════════════════════════════════════
   ARTICLE CONTENT CONTAINER
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content {
  font-family: var(--font-body, 'Tajawal', sans-serif);
  font-size: var(--article-body-size);
  line-height: 1.8;
  color: var(--article-text-secondary);
}

@media (min-width: 768px) {
  .article-content {
    font-size: var(--article-body-size-md);
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   H2 HEADINGS - First Word Underline + Fading Extension Line

   Visual (RTL):
   أساسيات الاستثمار في الأسهم
                       ════════ ────────────────→
                       [gold]   [gray fading]
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content h2 {
  position: relative;
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-size: var(--article-h2-size);
  font-weight: 700;
  line-height: 1.3;
  letter-spacing: -0.01em;
  color: var(--color-navy-900, #102A43);
  margin-top: var(--article-h2-margin-top);
  margin-bottom: var(--article-h2-margin-bottom);
  padding-bottom: 1rem;
  border-bottom: none !important;
}

@media (min-width: 768px) {
  .article-content h2 {
    font-size: var(--article-h2-size-md);
  }
}

/* Thin pale gray fading line - full width */
.article-content h2::after {
  content: '';
  position: absolute;
  bottom: 0;
  right: 0;
  left: 0;
  height: 1px;
  background: linear-gradient(
    to left,
    var(--article-border-strong) 0%,
    var(--article-border-default) 30%,
    rgba(226, 232, 240, 0.4) 70%,
    rgba(226, 232, 240, 0) 100%
  );
  pointer-events: none;
}

/* Thick gold underline under first word area (right side in RTL) */
.article-content h2::before {
  content: '';
  position: absolute;
  bottom: -2px;
  right: 0;
  width: clamp(80px, 20%, 140px);
  height: 4px;
  background-color: var(--article-accent-gold);
  border-radius: 2px;
  z-index: 1;
  pointer-events: none;
}

/* First H2 - no top margin */
.article-content h2:first-child {
  margin-top: 0;
}

/* ═══════════════════════════════════════════════════════════════════════════
   H3 HEADINGS - Animated Vertical Bar

   Visual (RTL):
                         ║ عنوان فرعي
                   [gold bar] [text]
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content h3 {
  position: relative;
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-size: var(--article-h3-size);
  font-weight: 700;
  line-height: 1.35;
  color: var(--color-navy-800, #243B53);
  margin-top: var(--article-h3-margin-top);
  margin-bottom: var(--article-h3-margin-bottom);
  padding-right: 1rem;
  border-bottom: none !important;
}

@media (min-width: 768px) {
  .article-content h3 {
    font-size: var(--article-h3-size-md);
  }
}

/* Vertical gold bar - animated on scroll */
.article-content h3::before {
  content: '';
  position: absolute;
  right: 0;
  top: 0.15em;
  width: 4px;
  height: 1.2em;
  background-color: var(--article-accent-gold);
  border-radius: 2px;
  transform: scaleY(0);
  transform-origin: top;
  transition: transform var(--h3-bar-animation-duration) var(--h3-bar-easing);
  pointer-events: none;
}

/* Visible state - triggered by IntersectionObserver */
.article-content h3.h3-visible::before {
  transform: scaleY(1);
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .article-content h3::before {
    transform: scaleY(1);
    transition: none;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   H4, H5, H6 HEADINGS
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content h4 {
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-size: 1.25rem;
  font-weight: 600;
  line-height: 1.4;
  color: var(--color-navy-800, #243B53);
  margin-top: 1.75rem;
  margin-bottom: 0.75rem;
}

.article-content h5 {
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-size: 1.125rem;
  font-weight: 600;
  line-height: 1.45;
  color: var(--color-navy-700, #334E68);
  margin-top: 1.5rem;
  margin-bottom: 0.625rem;
}

.article-content h6 {
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-size: 1rem;
  font-weight: 600;
  line-height: 1.5;
  color: var(--color-navy-700, #334E68);
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
}

/* ═══════════════════════════════════════════════════════════════════════════
   PARAGRAPHS
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content p {
  margin: 0 0 var(--article-paragraph-margin);
  color: var(--article-text-secondary);
}

/* First paragraph after heading - tighter margin */
.article-content h2 + p,
.article-content h3 + p,
.article-content h4 + p {
  margin-top: 0;
}

/* Last paragraph - no bottom margin */
.article-content p:last-child {
  margin-bottom: 0;
}

/* ═══════════════════════════════════════════════════════════════════════════
   INTERNAL LINKS - Gold Underline
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content a:not(.toc-link):not(.breadcrumb-link):not(.btn):not(.related-card-link) {
  color: var(--article-text-primary);
  text-decoration: underline;
  text-decoration-color: var(--article-accent-gold);
  text-underline-offset: 10px; /* Clears Arabic descenders */
  text-decoration-thickness: 2px;
  text-decoration-skip-ink: auto;
  padding-bottom: 0.15em;
  transition:
    color 200ms ease,
    text-decoration-color 200ms ease,
    text-underline-offset 200ms ease;
}

.article-content a:not(.toc-link):not(.breadcrumb-link):not(.btn):not(.related-card-link):hover {
  color: var(--article-accent-gold);
  text-decoration-color: var(--article-text-primary);
  text-underline-offset: 12px;
}

.article-content a:not(.toc-link):not(.breadcrumb-link):not(.btn):not(.related-card-link):focus-visible {
  outline: 2px solid var(--article-accent-gold);
  outline-offset: 4px;
  border-radius: 2px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   UNORDERED LISTS - Gold Square Bullets
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content ul {
  list-style: none;
  padding: 0;
  margin: 0 0 1.5rem;
}

.article-content ul > li {
  position: relative;
  padding-right: 1.75rem;
  margin-bottom: 0.75rem;
  line-height: 1.7;
}

.article-content ul > li:last-child {
  margin-bottom: 0;
}

/* Primary bullet - gold square */
.article-content ul > li::before {
  content: '';
  position: absolute;
  right: 0;
  top: 0.625em;
  width: 8px;
  height: 8px;
  background-color: var(--article-accent-gold);
  border-radius: 2px;
}

/* Nested list items - smaller circular bullets */
.article-content ul ul {
  margin-top: 0.75rem;
  margin-bottom: 0;
}

.article-content ul ul > li {
  padding-right: 1.5rem;
}

.article-content ul ul > li::before {
  width: 6px;
  height: 6px;
  background-color: var(--article-border-strong);
  border-radius: 50%;
}

/* Third level - even smaller */
.article-content ul ul ul > li::before {
  width: 4px;
  height: 4px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   ORDERED LISTS - Numbered Circles
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content ol {
  list-style: none;
  padding: 0;
  margin: 0 0 1.5rem;
  counter-reset: list-counter;
}

.article-content ol > li {
  position: relative;
  padding-right: 2.5rem;
  margin-bottom: 0.75rem;
  line-height: 1.7;
  counter-increment: list-counter;
}

.article-content ol > li:last-child {
  margin-bottom: 0;
}

/* Number in gold circle */
.article-content ol > li::before {
  content: counter(list-counter);
  position: absolute;
  right: 0;
  top: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-size: 0.875rem;
  font-weight: 700;
  color: #FFFFFF;
  background-color: var(--article-accent-gold);
  border-radius: 50%;
}

/* Nested ordered lists */
.article-content ol ol {
  margin-top: 0.75rem;
  margin-bottom: 0;
  counter-reset: nested-counter;
}

.article-content ol ol > li {
  counter-increment: nested-counter;
}

.article-content ol ol > li::before {
  content: counter(nested-counter);
  width: 24px;
  height: 24px;
  font-size: 0.75rem;
  background-color: var(--article-border-strong);
  color: var(--article-text-secondary);
}

/* ═══════════════════════════════════════════════════════════════════════════
   BLOCKQUOTES
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content blockquote {
  position: relative;
  margin: 2rem 0;
  padding: 1.5rem 2rem;
  background-color: var(--article-bg-highlight);
  border-right: 4px solid var(--article-accent-gold);
  border-radius: 0 0.75rem 0.75rem 0;
  font-style: normal;
  color: var(--article-text-secondary);
}

.article-content blockquote p {
  margin: 0;
}

.article-content blockquote p + p {
  margin-top: 1rem;
}

/* Nested blockquote */
.article-content blockquote blockquote {
  margin: 1rem 0 0;
  border-right-color: var(--article-border-strong);
}

/* ═══════════════════════════════════════════════════════════════════════════
   CALLOUT BOXES
   ═══════════════════════════════════════════════════════════════════════════ */

.callout {
  margin: 2rem 0;
  padding: 1.5rem;
  border-radius: 0 0.75rem 0.75rem 0;
  border-right: 4px solid;
}

.callout-info {
  background-color: #DBEAFE;
  border-color: #3B82F6;
}

.callout-warning {
  background-color: #FEF3C7;
  border-color: #F59E0B;
}

.callout-success {
  background-color: #D1FAE5;
  border-color: #10B981;
}

.callout-danger {
  background-color: #FEE2E2;
  border-color: #EF4444;
}

.callout-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0 0 0.75rem;
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-size: 1rem;
  font-weight: 700;
}

.callout-info .callout-title { color: #1E40AF; }
.callout-warning .callout-title { color: #B45309; }
.callout-success .callout-title { color: #047857; }
.callout-danger .callout-title { color: #B91C1C; }

.callout-content {
  font-size: 1rem;
  line-height: 1.6;
}

.callout-info .callout-content { color: #1E3A8A; }
.callout-warning .callout-content { color: #92400E; }
.callout-success .callout-content { color: #065F46; }
.callout-danger .callout-content { color: #991B1B; }

/* ═══════════════════════════════════════════════════════════════════════════
   TABLES - Terminal-Grade Data Display
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content .table-wrapper {
  margin: 2rem 0;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: 0.75rem;
  border: 1px solid var(--article-border-default);
}

.article-content table {
  width: 100%;
  border-collapse: collapse;
  font-size: 1rem;
  background-color: #FFFFFF;
}

.article-content th {
  padding: 1rem 1.25rem;
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-weight: 700;
  font-size: 0.875rem;
  text-align: right;
  color: var(--color-navy-900, #102A43);
  background-color: var(--article-bg-highlight);
  border-bottom: 2px solid var(--article-border-default);
}

.article-content td {
  padding: 1rem 1.25rem;
  border-bottom: 1px solid var(--article-border-light);
  color: var(--article-text-secondary);
  font-variant-numeric: tabular-nums; /* Numeric alignment */
}

.article-content tr:last-child td {
  border-bottom: none;
}

.article-content tr:hover td {
  background-color: rgba(213, 160, 53, 0.04);
}

/* Numeric columns - left align for RTL */
.article-content td[data-type="number"],
.article-content th[data-type="number"] {
  text-align: left;
  font-variant-numeric: tabular-nums;
}

/* Positive/negative values */
.article-content .value-positive {
  color: #047857;
}

.article-content .value-negative {
  color: #B91C1C;
}

/* ═══════════════════════════════════════════════════════════════════════════
   CODE BLOCKS
   ═══════════════════════════════════════════════════════════════════════════ */

/* Inline code */
.article-content code {
  padding: 0.125rem 0.375rem;
  font-family: var(--font-mono, 'IBM Plex Mono', monospace);
  font-size: 0.9em;
  background-color: var(--article-bg-highlight);
  border-radius: 0.25rem;
  direction: ltr; /* Code is always LTR */
}

/* Code block */
.article-content pre {
  margin: 2rem 0;
  padding: 1.5rem;
  background-color: var(--color-navy-900, #102A43);
  border-radius: 0.75rem;
  overflow-x: auto;
  direction: ltr;
}

.article-content pre code {
  padding: 0;
  background-color: transparent;
  color: #E2E8F0;
  font-size: 0.9375rem;
  line-height: 1.6;
}

/* ═══════════════════════════════════════════════════════════════════════════
   IMAGES & FIGURES
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content img {
  max-width: 100%;
  height: auto;
  border-radius: 0.75rem;
}

.article-content figure {
  margin: 2rem 0;
}

.article-content figure img {
  width: 100%;
  box-shadow: 0 4px 16px rgba(15, 23, 42, 0.08);
}

.article-content figcaption {
  margin-top: 0.75rem;
  padding: 0.75rem 1rem;
  font-size: 0.9375rem;
  color: var(--article-text-muted);
  text-align: center;
  background-color: var(--article-bg-highlight);
  border-radius: 0.5rem;
}

/* ═══════════════════════════════════════════════════════════════════════════
   HORIZONTAL RULE
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content hr {
  margin: 3rem 0;
  border: none;
  height: 1px;
  background: linear-gradient(
    to left,
    var(--article-accent-gold) 0%,
    var(--article-accent-gold) 15%,
    var(--article-border-default) 15%,
    transparent 100%
  );
}

/* ═══════════════════════════════════════════════════════════════════════════
   STRONG & EMPHASIS
   ═══════════════════════════════════════════════════════════════════════════ */

.article-content strong {
  font-weight: 700;
  color: var(--article-text-primary);
}

.article-content em {
  font-style: italic;
}

/* ═══════════════════════════════════════════════════════════════════════════
   RISK DISCLAIMER BOX
   ═══════════════════════════════════════════════════════════════════════════ */

.notice-warning {
  margin: 3rem 0;
  background-color: #FEF3C7;
  border: 1px solid #F59E0B;
  border-right-width: 4px;
  border-radius: 0 0.75rem 0.75rem 0;
  overflow: hidden;
}

.notice-warning-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  margin: 0;
  background-color: rgba(245, 158, 11, 0.1);
  border-bottom: 1px solid rgba(245, 158, 11, 0.2);
  font-family: var(--font-heading, 'Noto Kufi Arabic', sans-serif);
  font-size: 1.125rem;
  font-weight: 700;
  color: #92400E;
}

.notice-warning-title svg {
  width: 24px;
  height: 24px;
  color: #B45309;
  flex-shrink: 0;
}

.notice-warning-text {
  padding: 1rem 1.5rem;
  margin: 0;
  font-size: 1rem;
  line-height: 1.7;
  color: #92400E;
}

/* ═══════════════════════════════════════════════════════════════════════════
   TRUST INDICATORS
   ═══════════════════════════════════════════════════════════════════════════ */

.trust-indicator {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.625rem 1rem;
  background-color: var(--article-bg-highlight);
  border: 1px solid var(--article-border-default);
  border-radius: 0.5rem;
  font-size: 0.875rem;
  color: var(--article-text-secondary);
}

.trust-indicator-icon {
  width: 18px;
  height: 18px;
  color: var(--article-accent-gold);
}

.trust-indicator-text {
  font-weight: 500;
}

.security-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.625rem 1rem;
  background-color: rgba(16, 185, 129, 0.08);
  border: 1px solid rgba(16, 185, 129, 0.2);
  border-radius: 0.5rem;
  font-size: 0.875rem;
  color: #047857;
}

.security-badge-icon {
  width: 18px;
  height: 18px;
  color: #10B981;
}

.security-badge-text {
  font-weight: 500;
}

/* ═══════════════════════════════════════════════════════════════════════════
   CONTENT BOX
   ═══════════════════════════════════════════════════════════════════════════ */

.content-box {
  background-color: #FFFFFF;
  border-radius: 1rem;
  border: 1px solid var(--article-border-default);
  padding: 2rem 1.5rem;
  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.04);
}

@media (min-width: 768px) {
  .content-box {
    padding: 2.5rem 2rem;
  }
}

.content-box-highlight {
  background-color: var(--article-bg-highlight);
  border-radius: 1rem;
  border: 1px solid var(--article-border-default);
  padding: 1.5rem;
}

/* ═══════════════════════════════════════════════════════════════════════════
   MOBILE OPTIMIZATIONS
   ═══════════════════════════════════════════════════════════════════════════ */

@media (max-width: 767px) {
  .article-content h2 {
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  .article-content h3 {
    margin-top: 1.75rem;
    margin-bottom: 0.875rem;
  }

  .article-content ul > li {
    padding-right: 1.5rem;
  }

  .article-content ol > li {
    padding-right: 2.25rem;
  }

  .article-content ol > li::before {
    width: 24px;
    height: 24px;
    font-size: 0.75rem;
  }

  .article-content table {
    font-size: 0.9375rem;
  }

  .article-content th,
  .article-content td {
    padding: 0.75rem;
  }

  .notice-warning {
    margin: 2rem 0;
  }

  .notice-warning-title,
  .notice-warning-text {
    padding: 1rem;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   PRINT STYLES
   ═══════════════════════════════════════════════════════════════════════════ */

@media print {
  .article-content h2::before,
  .article-content h2::after,
  .article-content h3::before {
    display: none;
  }

  .article-content a {
    text-decoration: underline;
    text-decoration-color: currentColor;
  }

  .article-content ul > li::before,
  .article-content ol > li::before {
    print-color-adjust: exact;
    -webkit-print-color-adjust: exact;
  }

  .notice-warning {
    background-color: #FEF3C7 !important;
    print-color-adjust: exact;
    -webkit-print-color-adjust: exact;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   REDUCED MOTION
   ═══════════════════════════════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
  .article-content a,
  .article-content h3::before {
    transition: none;
  }
}
